<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>US Redistricting Tool</title>
  <link rel="stylesheet" href="css/style.css">

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
</head>
<body>
  <header class="app-header">
    <h1>US Redistricting Tool</h1>
    <div class="state-selector">
      <label for="stateSelect">State:</label>
      <select id="stateSelect"></select>
      <button id="loadStateBtn">Load</button>
    </div>
    <div class="plan-controls">
      <label for="planName">Plan name:</label>
      <input type="text" id="planName" placeholder="My Plan">
      <button id="newPlanBtn">New Plan</button>
      <button id="savePlanBtn">Save Plan</button>
      <select id="existingPlans"></select>
      <button id="loadPlanBtn">Load Plan</button>
    </div>
  </header>

  <main class="layout">
    <section class="sidebar">
      <h2>Districting Controls</h2>
      <label for="numDistricts">Number of districts:</label>
      <input type="number" id="numDistricts" min="1" max="100" value="10">

      <h3>Drawing Mode</h3>
      <label>
        <input type="radio" name="drawMode" value="assign" checked>
        Assign precincts
      </label>
      <label>
        <input type="radio" name="drawMode" value="erase">
        Unassign precincts
      </label>
      
      <div style="margin-top: 0.5rem;">
        <label for="districtSelector" style="font-size:0.85rem;">Paint with District:</label>
        <select id="districtSelector" style="width:100%;padding:0.4rem;margin-top:0.25rem;">
          <option value="1">District 1</option>
        </select>
      </div>
      
      <p style="font-size:0.75rem;color:#6b7280;margin-top:0.5rem;">
        <strong>Shortcuts:</strong> 1-9 = select district, E = erase, A = assign
      </p>

      <h3>District Colors</h3>
      <p style="font-size:0.75rem;color:#6b7280;">Click a district to select it for painting.</p>
      <div id="districtColorLegend"></div>

      <h3>Metrics</h3>
      <div id="metricsPanel">
        <p>Select a state and start assigning precincts to see metrics.</p>
      </div>

      <h3>System Status</h3>
      <p style="font-size:0.8rem;">
        This is a static demo version hosted on GitHub Pages.
        <br>To use the full version with data upload, run the PHP version locally.
      </p>
    </section>

    <section class="map-panel">
      <div class="map-toolbar">
        <span>Click precincts to assign districts. Zoom with wheel, pan with Shift+drag.</span>
      </div>

      <!-- Leaflet map for basemap + precinct overlay -->
      <div id="leafletMap" style="width: 100%; height: 600px;"></div>

      <!-- Existing canvas map (used by map.js for district drawing) -->
      <canvas id="mapCanvas"></canvas>
      <div id="hoverInfo" class="hover-info"></div>
    </section>
  </main>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script src="js/map.js"></script>
  <script src="js/metrics.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
